---
import BaseLayout from '../layouts/BaseLayout.astro';
import ProjectCard from '../components/ProjectCard.astro';
import SmallProjectCard from '../components/SmallProjectCard.astro';
import SectionHeader from '../components/SectionHeader.astro';

// Fetch main projects
const mainProjects = await Astro.glob('../content/projects/main/*.mdx');

// Fetch small projects
const smallProjects = await Astro.glob('../content/projects/small/*.mdx');
---

<BaseLayout title="Portfolio">
  <h2 class="text-title font-bold mb-8">
    <span class="text-navigation">/</span><span class="text-white">projects</span>
  </h2>
  <p class="text-normal text-secondary-text mb-8">
    List of my projects
  </p>

  <section class="mb-12">
    <div class="flex flex-col md:flex-row items-center mb-8">
      <SectionHeader title="main projects" />
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {mainProjects.map((project) => (
        <ProjectCard
          title={project.frontmatter.title}
          description={project.frontmatter.description}
          image={project.frontmatter.image}
          url={project.frontmatter.url}
          software={Array.isArray(project.frontmatter.software) ? project.frontmatter.software : []}
        />
      ))}
    </div>
  </section>

  <section>
    <div class="flex flex-col md:flex-row items-center mb-8">
      <SectionHeader title="small projects" />
    </div>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {smallProjects.map((project) => (
        <SmallProjectCard
          title={project.frontmatter.title}
          description={project.frontmatter.description}
          url={project.frontmatter.url}
          software={Array.isArray(project.frontmatter.software) ? project.frontmatter.software : []}
        />
      ))}
    </div>
  </section>
</BaseLayout>
